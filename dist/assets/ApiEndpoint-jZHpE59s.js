import{c as N,r as g,j as e,C as k}from"./index-HI_-yyDE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=N("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=N("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=N("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),C=({endpoint:t,onSubmit:c,onClear:m,isLoading:d,hasResponse:p})=>{const[l,r]=g.useState({}),u=s=>{s.preventDefault(),c(l)},x=(s,h)=>{r(i=>({...i,[s]:h}))};return e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[t.parameters&&t.parameters.length>0&&e.jsx("div",{className:"space-y-3",children:t.parameters.map(s=>{var h;return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-1 font-sans",children:[s.name,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.description&&e.jsx("div",{className:"text-xs text-muted-foreground/70 mb-2 font-sans",children:s.description}),s.type==="select"?e.jsx("select",{name:s.name,value:l[s.name]||s.defaultValue||"",onChange:i=>x(s.name,i.target.value),required:s.required,className:"w-full px-3 py-2 border border-border text-sm focus:outline-none focus:border-primary bg-card placeholder:text-muted-foreground font-mono transition-colors",children:(h=s.options)==null?void 0:h.map(i=>e.jsx("option",{value:i,children:i},i))}):s.type==="textarea"?e.jsx("textarea",{name:s.name,value:l[s.name]||"",onChange:i=>x(s.name,i.target.value),placeholder:s.placeholder,required:s.required,rows:3,className:"w-full px-3 py-2 border border-border text-sm focus:outline-none focus:border-primary bg-card placeholder:text-muted-foreground font-mono resize-none transition-colors"}):e.jsx("input",{type:"text",name:s.name,value:l[s.name]||"",onChange:i=>x(s.name,i.target.value),placeholder:s.placeholder,required:s.required,className:"w-full px-3 py-2 border border-border text-sm focus:outline-none focus:border-primary bg-card placeholder:text-muted-foreground font-mono transition-colors"})]},s.name)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"submit",disabled:d,className:"bg-primary hover:bg-primary/90 font-semibold text-primary-foreground px-6 py-2 text-xs transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-sans",children:[d&&e.jsx(R,{className:"w-3 h-3 animate-spin"}),"Execute"]}),p&&e.jsx("button",{type:"button",onClick:m,className:"bg-card border border-border hover:border-primary font-semibold text-foreground px-6 py-2 text-xs transition-colors font-sans",children:"Clear"})]})]})},$=({response:t,method:c,url:m,status:d,contentType:p})=>{const[l,r]=g.useState(!1),[u,x]=g.useState(!1),s=({method:a,url:b,status:n})=>e.jsxs("div",{className:"mb-3 pb-3 border-b border-primary-foreground/20",children:[a&&e.jsxs("div",{className:"text-xs font-mono mb-1",children:[e.jsx("span",{className:"opacity-70",children:"Method:"})," ",e.jsx("span",{className:"font-bold",children:a})]}),b&&e.jsxs("div",{className:"text-xs font-mono mb-1 break-all",children:[e.jsx("span",{className:"opacity-70",children:"URL:"})," ",e.jsx("span",{className:"font-bold",children:b})]}),n&&e.jsxs("div",{className:"text-xs font-mono",children:[e.jsx("span",{className:"opacity-70",children:"Status:"})," ",e.jsx("span",{className:"font-bold",children:n})]})]});if(p==="video")return e.jsx("div",{className:"bg-primary text-primary-foreground p-4",children:e.jsxs("div",{className:"max-h-[600px] overflow-auto flex flex-col gap-4",children:[e.jsx(s,{method:c,url:m,status:d}),e.jsx("div",{className:"w-full bg-black rounded overflow-hidden",children:e.jsx("video",{src:t,controls:!0,autoPlay:!1,playsInline:!0,className:"w-full h-auto",onLoadedData:()=>x(!0),style:{maxHeight:"500px",display:"block"},preload:"auto",children:"Seu navegador não suporta a reprodução de vídeos."})})]})});if(p==="image")return e.jsx("div",{className:"bg-primary text-primary-foreground p-4",children:e.jsxs("div",{className:"max-h-80 overflow-auto flex flex-col gap-4",children:[e.jsx(s,{method:c,url:m,status:d}),e.jsx("div",{className:"w-full bg-black/10 rounded overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:t,alt:"Response media",className:"max-w-full h-auto rounded",onLoad:()=>r(!0),style:{display:"block"}})}),!l&&e.jsx("div",{className:"text-xs text-center opacity-70",children:"Carregando imagem..."})]})});let h;try{h=JSON.parse(t)}catch{h=null}const i=a=>{if(!a||typeof a!="object")return null;if(a.type==="video"&&a.url)return{url:a.url,type:"video"};if(a.type==="image"&&a.url)return{url:a.url,type:"image"};const b=["url","image","imageUrl","img","picture","photo","src","link","video","videoUrl"];for(const n of b)if(a[n]&&typeof a[n]=="string"){const o=a[n];if(o.match(/\.(mp4|webm|ogg|mov|avi|mkv|flv|wmv|m4v)(\?|$)/i)||o.startsWith("data:video")||n.toLowerCase().includes("video"))return{url:o,type:"video"};if(o.startsWith("http")||o.startsWith("data:image")||o.match(/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?|$)/i))return{url:o,type:"image"}}for(const n in a){const o=i(a[n]);if(o)return o}return null},y=h?i(h):null;return y?y.type==="video"?e.jsx("div",{className:"bg-primary text-primary-foreground p-4",children:e.jsxs("div",{className:"max-h-[600px] overflow-auto flex flex-col gap-4",children:[e.jsx(s,{method:c,url:m,status:d}),e.jsx("div",{className:"w-full bg-black rounded overflow-hidden",children:e.jsxs("video",{src:y.url,controls:!0,autoPlay:!1,playsInline:!0,className:"w-full h-auto",onLoadedData:()=>x(!0),onError:a=>{console.error("Video error:",a),x(!1)},style:{maxHeight:"500px",display:"block"},preload:"auto",crossOrigin:"anonymous",children:[e.jsx("source",{src:y.url}),"Seu navegador não suporta a reprodução de vídeos."]})}),e.jsxs("div",{className:"border-t border-primary-foreground/20 pt-3",children:[e.jsx("div",{className:"text-xs font-semibold mb-2 opacity-70",children:"JSON Response:"}),e.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap break-words",children:t})]})]})}):e.jsx("div",{className:"bg-primary text-primary-foreground p-4",children:e.jsxs("div",{className:"max-h-80 overflow-auto flex flex-col gap-4",children:[e.jsx(s,{method:c,url:m,status:d}),e.jsx("div",{className:"w-full bg-black/10 rounded overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:y.url,alt:"Response media",className:"max-w-full h-auto rounded",onLoad:()=>r(!0),onError:a=>{console.error("Image error:",a),r(!1)},style:{display:"block"},crossOrigin:"anonymous"})}),!l&&e.jsx("div",{className:"text-xs text-center opacity-70",children:"Carregando imagem..."}),e.jsxs("div",{className:"border-t border-primary-foreground/20 pt-3",children:[e.jsx("div",{className:"text-xs font-semibold mb-2 opacity-70",children:"JSON Response:"}),e.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap break-words",children:t})]})]})}):e.jsx("div",{className:"bg-primary text-primary-foreground p-4",children:e.jsxs("div",{className:"max-h-80 overflow-auto",children:[e.jsx(s,{method:c,url:m,status:d}),e.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap break-words",children:t})]})})},E=(t,c)=>{const[m,d]=g.useState("checking");return g.useEffect(()=>{const p=async()=>{try{const r=new AbortController,u=setTimeout(()=>r.abort(),5e3),x=await fetch(`${t}${c}`,{method:"HEAD",signal:r.signal}).catch(()=>null);clearTimeout(u),x&&x.ok?d("online"):d("offline")}catch{d("offline")}};p();const l=setInterval(p,3e4);return()=>clearInterval(l)},[t,c]),m},O=({endpoint:t,serverUrl:c})=>{const[m,d]=g.useState(!1),[p,l]=g.useState(null),[r,u]=g.useState(null),[x,s]=g.useState(!1),[h,i]=g.useState(0);E(c,t.path);const y=async b=>{s(!0),l(null),u(null),i(n=>n+1);try{let n;if(t.id==="noticias")n=`/api/proxy-noticias?${new URLSearchParams(b).toString()}`;else if(t.id==="hentai")n=`/api/proxy-hentai?${new URLSearchParams(b).toString()}`;else{const f=new URLSearchParams(b);n=`${c}${t.path}?${f.toString()}`}const o=await fetch(n),w=o.headers.get("content-type")||"",v=t.id==="noticias"||t.id==="hentai"?`${c}${t.path}`:n;if(w.includes("video/")){const f=await o.blob(),j=URL.createObjectURL(f);l(j),u({method:t.method,url:v,status:o.status,contentType:"video"})}else if(w.includes("image/")){const f=await o.blob(),j=URL.createObjectURL(f);l(j),u({method:t.method,url:v,status:o.status,contentType:"image"})}else try{const f=await o.json();l(JSON.stringify(f,null,2)),u({method:t.method,url:v,status:o.status,contentType:"json"})}catch{const f=await o.text();l(f),u({method:t.method,url:v,status:o.status,contentType:"text"})}}catch(n){l(JSON.stringify({error:"Request failed",message:String(n)},null,2)),u({method:t.method,url:`${c}${t.path}`,status:500})}finally{s(!1)}},a=()=>{l(null),u(null)};return e.jsxs("div",{className:"border-t border-border/50 backdrop-blur-sm hover:bg-accent/5 transition-smooth group/endpoint",children:[e.jsxs("button",{onClick:()=>d(!m),className:"w-full px-7 py-4 text-left flex items-center justify-between group/btn",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-lg blur-sm group-hover/btn:blur-md transition-smooth"}),e.jsx("span",{className:"relative inline-flex items-center px-3 py-1.5 text-xs font-black gradient-primary text-primary-foreground rounded-lg font-sans shadow-elegant group-hover/btn:scale-105 group-hover/btn:shadow-glow transition-bounce uppercase tracking-wider",children:t.method})]}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1 gap-1",children:[e.jsx("span",{className:"font-bold truncate text-sm font-mono group-hover/btn:text-primary transition-smooth",title:t.path,children:t.path}),e.jsx("span",{className:"text-xs text-muted-foreground truncate font-sans font-medium",title:t.alias,children:t.alias})]})]}),e.jsx(k,{className:`w-5 h-5 transition-bounce text-muted-foreground group-hover/btn:text-primary flex-shrink-0 ${m?"rotate-180":""}`})]}),m&&e.jsxs("div",{className:"bg-gradient-accent/30 px-7 py-6 border-t border-border/50 backdrop-blur-sm animate-fade-in",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-primary shadow-elegant",children:e.jsx(L,{className:"w-4 h-4 text-primary-foreground"})}),e.jsx("h3",{className:"text-foreground font-black text-sm font-sans uppercase tracking-wider",children:"Testar Endpoint"})]}),e.jsx(C,{endpoint:t,onSubmit:y,onClear:a,isLoading:x,hasResponse:!!p})]}),p&&e.jsxs("div",{className:"animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-secondary shadow-elegant",children:e.jsx(S,{className:"w-4 h-4 text-primary-foreground"})}),e.jsx("h3",{className:"text-foreground font-black text-sm font-sans uppercase tracking-wider",children:"Resposta"})]}),e.jsx($,{response:p,method:r==null?void 0:r.method,url:r==null?void 0:r.url,status:r==null?void 0:r.status,contentType:r==null?void 0:r.contentType},h)]})]})]})},T=g.memo(O);export{T as ApiEndpoint};
